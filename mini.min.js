var SPACE,LEFT,RIGHT,UP,DOWN,PI,TAU,LEFT_BUTTON,RIGHT_BUTTON,ESCAPE,TAB,SHIFT,CONTROL,ALT,ENTER,BACKSPACE,RGBA,HSL,HEX,skiJSData;function debug(...n){console.debug(...n)}function isEqual(...n){console.assert(...n)}function day(){return(new Date).getDate()}function month(){return(new Date).getMonth()}function year(){return(new Date).getYear()}function hour(){return(new Date).getHours()}function minute(){return(new Date).getMinutes()}function seconds(){return(new Date).getSeconds()}function enableContextMenu(){canvas.oncontextmenu=!0}function cursor(n){document.body.style.cursor=n}function smooth(){ctx.imageSmoothingEnabled=!0,ctx.imageSmoothingQuality="high"}function noSmooth(){ctx.imageSmoothingEnabled=!1,ctx.imageSmoothingQuality="low"}function noLoop(){skiJSData.draw=draw,draw=0}function loop(){draw=skiJSData.draw||draw}function max(n,t){return n>t?n:t}function min(n,t){return n<t?n:t}function mag(n,t){return Math.sqrt(n**2+t**2)}function dist(n,t,r,e){return mag(r-n,e-t)}function manhattanDistance(n,t,r,e){return abs(n-r)+abs(t-e)}function chebyshevDistance(n,t,r,e){return max(abs(n-r),abs(t-e))}function exp(n){return Math.E**n}function norm(n,t,r){return(n-t)/(r-t)}function map(n,t,r,e,o){return e+(o-e)*norm(n,t,r)}function lerp(n,t,r){return(t-n)*r+n}function random(n,t){return t?Math.random()*(t-n)+n:n?Math.random()*n:Math.random()}function constrain(n,t,r){return min(max(n,t),r)}function log(n){return Math.log(n)}function sqrt(n){return Math.sqrt(n)}function sq(n){return n**2}function pow(n,t){return n**t}function abs(n){return n<0?-n:n}function trunc(n){return 0|n}function floor(n){return n<0?(0|n)-1:0|n}function ceil(n){return floor(n)+1}function round(n){return n-floor(n)<.5?floor(n):ceil(n)}function sin(n){return skiJSData.angle===DEGREES&&(n=degrees(n)),Math.sin(n)}function cos(n){return skiJSData.angle===DEGREES&&(n=degrees(n)),Math.cos(n)}function tan(n){return skiJSData.angle===DEGREES&&(n=degrees(n)),Math.tan(n)}function acos(n){return skiJSData.angle===DEGREES&&(n=degrees(n)),Math.acos(n)}function asin(n){return skiJSData.angle===DEGREES&&(n=degrees(n)),Math.asin(n)}function atan(n){return n=Math.atan(n),skiJSData.angle===DEGREES&&(n=radians(n)),n}function atan2(n,t){let r=Math.atan2(n,t);return skiJSData.angle===DEGREES&&(r=radians(r)),r}function radians(n){return n*(180/PI)}function degrees(n){return n*(PI/180)}function angleMode(n){skiJSData.angle=n}function bezierPoint(n,t,r,e,o){return(1-o)*(1-o)*(1-o)*n+3*(1-o)*(1-o)*o*t+3*(1-o)*o*o*r+o*o*o*e}function bezierTangent(n,t,r,e,o){return 3*o*o*(-n+3*t-3*r+e)+6*o*(n-2*t+r)+3*(-n+t)}function colorMode(n){return skiJSData.color=n}function color(...n){if("string"==typeof n[0]&&n.length<=1&&/(#|rgb|hsl|rgba)/.test(n[0]))return n[0];if(n[0]instanceof Array&&(n=n[0]),"number"==typeof n[1]&&/rgb|rgba/.test(n[0])){let t=n[0].match(/[0-9\.]+(?=(,|\)))/g);n=[t[0],t[1],t[2],n[1]]}switch(skiJSData.color){case RGBA:let[r,e,o,a]=n.length>4?Object.assign(n,{length:4}):n;switch(n.length){case 1:return`rgba(${r}, ${r}, ${r}, 1)`;case 2:return`rgba(${r}, ${r}, ${r}, ${e/255})`;case 3:return`rgba(${r}, ${e}, ${o}, 1)`;case 4:return`rgba(${r}, ${e}, ${o}, ${a/255})`}break;case HSL:return`hsl(${n[0]}, ${n[1]}%, ${n[2]}%)`;case HEX:return n[0]}}function lerpColor(n,t,r){if("string"!=typeof n||"string"!=typeof t||skiJSData.color!==RGBA)return;let[e,o,a,i]=n.match(/\d{1,3}/g),[u,c,s,l]=t.match(/\d{1,3}/g);return`rgba(${lerp(+e,+u,r)}, ${lerp(+o,+c,r)}, ${lerp(+a,+s,r)}, ${lerp(+i,+l,r)})`}function red(...n){if(skiJSData.color!==RGBA)return;let t=color(...n);return+t.match(/\d+(\.|)\d*/)}function green(...n){if(skiJSData.color!==RGBA)return;let t=color(...n);return+t.match(/\d+(\.|)\d*/g)[1]}function blue(...n){if(skiJSData.color!==RGBA)return;let t=color(...n);return+t.match(/\d+(\.|)\d*/g)[2]}function alpha(...n){if(skiJSData.color!==RGBA)return;let t=color(...n);return trunc(255*t.match(/\d+(\.|)\d*/g)[3])}function getImage(n,t,r){return new Promise((e,o)=>{let a=loadImage(n,t,r);a.onload=()=>e(a),a.onerror=()=>o("invalid or unaccessible image source")})}function loadImage(n,t,r){let e;return(e=t?new Image(t,r):new Image).src=n,/khanacademy/.test(n)||(e.crossOrigin="anonymous"),e}function getFont(...n){return new Promise((t,r)=>{let e=loadFont(...n);e.onload=()=>t(e),e.onerror=()=>reject("invalid or unaccessible fonts. not rlly, it's just an error lol. idk what went wrong, but you're router or DNS is blockin' fonts.googleapis.com")})}function loadFont(...n){let t=document.createElement("link");return t.rel="stylesheet",t.href=`https://fonts.googleapis.com/css?family=${n.join("|").replace(/ /g,"+")}`,document.body.appendChild(t),t}function frameRate(n){skiJSData.rate=n}function millis(){return skiJSData.millis}function raf(n){requestAnimationFrame(raf),delta=n-then;let t=1e3/skiJSData.rate;if(delta<t)return;let r=delta%t;then=n-r,delta-=r,draw_standin(n),frameCount+=1,skiJSData.millis=performance.now()-skiJSData.start,fps=1e3/delta}BACKSPACE=8,TAB=9,ENTER=13,SHIFT=16,CONTROL=17,ALT=18,ESCAPE=27,SPACE=32,LEFT=37,RIGHT=39,UP=38,DOWN=40,DEGREES="deg",RADIANS="rad",TAU=2*(PI=Math.PI),HSL="hsl",HEX="hex",skiJSData={angle:DEGREES,color:RGBA="rgba",rate:60,millis:0,start:0,draw:0},fps=60,frameCount=0,delta=1e3/60,then=performance.now(),skiJSData.start=performance.now(),Object.defineProperty(window,"draw",{get:()=>draw_standin,set(n){"function"!=typeof draw_standin&&requestAnimationFrame(raf),draw_standin=n},configurable:!0});
