var CORNER,CENTER,CLOSE,SPACE,LEFT,RIGHT,UP,DOWN,SQUARE,ROUND,PROJECT,MITER,BEVEL,DEGREES,RADIANS,PI,TAU,RGBA,HSL,HEX,LEFT_BUTTON,RIGHT_BUTTON,ESCAPE,TAB,SHIFT,CONTROL,ALT,ENTER,BACKSPACE,fps,skiJSData,canvas,ctx,mousePressed,mouseReleased,mouseScrolled,mouseClicked,mouseOver,mouseOut,mouseMoved,mouseIsPressed,mouseButton,mouseX,mouseY,pmouseX,pmouseY,keyPressed,keyReleased,keyTyped,key,keyIsPressed,keyCode,width,height;function size(t,e,n){canvas&&ctx||set(canvas=document.querySelectorAll("canvas,canvas.skijs,canvas[data-skijs]")[0]),width=canvas.width=t,height=canvas.height=e,n&&(canvas.style.width=`${t}px`,canvas.style.height=`${e}px`)}function set(...t){switch(t.length){case 0:return rejectCanvas(),ctx=(canvas=new OffscreenCanvas(width,height)).getContext("2d"),adoptCanvas(),[canvas,ctx];case 1:rejectCanvas(),ctx=(canvas=t[0]).getContext("2d"),width=canvas.width,height=canvas.height,adoptCanvas();break;case 2:return rejectCanvas(),ctx=(canvas=new OffscreenCanvas(t[0],t[1])).getContext("2d"),width=t[0],height=t[1],adoptCanvas(),[canvas,ctx]}}function background(...t){let e=[ctx.strokeStyle,ctx.fillStyle],n=ctx.getTransform();ctx.setTransform(1,0,0,1,0,0),ctx.strokeStyle="rgba(0, 0, 0, 0)",ctx.fillStyle=color(...t),ctx.fillRect(0,0,canvas.width,canvas.height),ctx.strokeStyle=e[0],ctx.fillStyle=e[1],ctx.setTransform(n)}function fill(...t){ctx.fillStyle=color(...t)}function stroke(...t){ctx.strokeStyle=color(...t)}function image(t,e,n,a=t.width,o=t.height){[e,n]=skiJSData.pos("image",e,n,a,o),t instanceof ImageData?ctx.putImageData(t,e,n,a,o):ctx.drawImage(t,e,n,a,o)}function clear(){let t=ctx.getTransform();ctx.setTransform(1,0,0,1,0,0),ctx.clearRect(0,0,width,height),ctx.setTransform(t)}function noStroke(){ctx.strokeStyle=color(0,0)}function noFill(){ctx.fillStyle=color(0,0)}function rect(t,e,n,a,...o){[t,e]=skiJSData.pos("rect",t,e,n,a),o.length>0?(ctx.beginPath(),ctx.roundRect(t,e,n,a,...o),ctx.closePath(),ctx.stroke(),ctx.fill()):(ctx.fillRect(t,e,n,a),ctx.strokeRect(t,e,n,a))}function wrapText(t,e){t=t.split(/[ ]/);let n=0,a="",o="";for(;n<t.length;){let r=t[n],s=r.indexOf("\n");s>=0?(a+=r.slice(0,s+1),o+=a,a=r.slice(s+1,r.length)+" "):textWidth(a+=r+" ")>e&&(o+=a+"\n",a=""),n++}return a.length>0&&(o+="\n"+a),o}function text(t,e,n,a,o){t=t?.toString(),a&&(t=wrapText(t,a)),t.includes("\n")?t.split("\n").map((a,o)=>{ctx.fillText(a,e,n+(o-(t.split("\n").length-1)/2)*(skiJSData.height+skiJSData.leading)),ctx.strokeText(a,e,n+(o-(t.split("\n").length-1)/2)*(skiJSData.height+skiJSData.leading))}):(ctx.fillText(t,e,n),ctx.strokeText(t,e,n))}function rectMode(t){skiJSData.rect=t}function ellipseMode(t){skiJSData.ellipse=t}function arcMode(t){skiJSData.arc=t}function imageMode(t){skiJSData.image=t}function textAlign(t,e){ctx.textAlign=t===CENTER?"center":"start",ctx.textBaseline=e===CENTER?"middle":"hanging"}function createFont(t){return t}function textSize(t){skiJSData.height=t,ctx.font=skiJSData.fontString(skiJSData.font,t)}function textFont(t,e=skiJSData.height){skiJSData.height!==e&&(skiJSData.height=e),skiJSData.flags=[],/bold/i.test(t)&&(skiJSData.flags.push("bold"),t=t.replace("bold","")),/italic/i.test(t)&&(skiJSData.flags.push("italic"),t=t.replace("italic","")),t=t.trim(),skiJSData.font=t,ctx.font=skiJSData.fontString(t,e)}function textLeading(t){skiJSData.leading=t}function textWidth(t){return t.split("\n").reduce((t,e)=>max(t,ctx.measureText(e).width),0)}function textAscent(){return ctx.measureText("a").fontBoundingBoxAscent}function textDescent(){ctx.measureText("a").fontBoundingBoxDescent}function strokeCap(t){ctx.lineCap=t}function strokeJoin(t){ctx.lineJoin=t}function strokeWeight(t){ctx.lineWidth=t}function pushStyle(){ctx.save()}function popStyle(){ctx.restore()}function pushMatrix(){let{matrices:t,matrixToArray:e}=skiJSData;t.push(e(ctx.getTransform()))}function popMatrix(){let t=new Float32Array(skiJSData.matrices.pop()),e=DOMMatrix.fromFloat32Array(t);ctx.setTransform(e)}function translate(t,e){ctx.transform(1,0,0,1,t,e)}function rotate(t){skiJSData.angle===DEGREES&&(t=degrees(t));let e=Math.cos,n=Math.sin;ctx.transform(e(t),n(t),-n(t),e(t),0,0)}function scale(t,e){ctx.transform(t,0,0,e||t,0,0)}function beginShape(){skiJSData.path=[]}function vertex(t,e){skiJSData.path.push([t,e])}function curveVertex(t,e,n,a){skiJSData.path.push([t,e,n,a])}function bezierVertex(t,e,n,a,o,r){skiJSData.path.push([t,e,n,a,o,r])}function endShape(t){let e=skiJSData.path;e.length<2||2!==e[0].length||(ctx.beginPath(),e.forEach((t,e)=>{if(0===e)ctx.moveTo(...t);else if(2===t.length)ctx.lineTo(...t);else if(4===t.length)ctx.quadraticCurveTo(...t);else{if(6!==t.length)return;ctx.bezierCurveTo(...t)}}),t&&ctx.closePath(),ctx.fill(),ctx.stroke())}function curve(t,e,n,a,o,r){"number"==typeof r&&(beginShape(),vertex(t,e),curveVertex(n,a,o,r),endShape())}function bezier(t,e,n,a,o,r,s,c){"number"==typeof c&&(beginShape(),vertex(t,e),bezierVertex(n,a,o,r,s,c),endShape())}function arc(t,e,n,a,o,r,s=!1){[t,e]=skiJSData.pos("arc",t,e,width,height),pushMatrix(),translate(t,e),n!==a&&(n>a?scale(max(n,a)/min(n,a),1):scale(1,max(n,a)/min(n,a))),ctx.beginPath(),ctx.fillStyle!==color(0,0)&&ctx.moveTo(0,0),ctx.arc(0,0,min(n,a)/2,degrees(o),degrees(r)),s&&ctx.closePath(),popMatrix(),ctx.fill(),ctx.stroke()}function ellipse(t,e,n,a){ctx.beginPath(),ctx.ellipse(t,e,n/2,a/2,0,0,TAU),ctx.fill(),ctx.stroke()}function quad(t,e,n,a,o,r,s,c){beginShape(),vertex(t,e),vertex(n,a),vertex(o,r),vertex(s,c),endShape(CLOSE)}function triangle(t,e,n,a,o,r){beginShape(),vertex(t,e),vertex(n,a),vertex(o,r),endShape(CLOSE)}function point(t,e){if(ctx.strokeStyle!==color(0,0)){let n=[ctx.strokeStyle,ctx.fillStyle];noStroke(),ctx.fillStyle=n[0],ellipse(t,e,ctx.lineWidth,ctx.lineWidth),ctx.strokeStyle=n[0],ctx.fillStyle=n[1]}}function line(t,e,n,a){ctx.beginPath(),ctx.moveTo(t,e),ctx.lineTo(n,a),ctx.closePath(),ctx.stroke()}function get(...t){let[e,n,a,o,r]=t;switch(t.length){case 0:return get(0,0,width,height);case 2:return color((data=ctx.getImageData(e,n,1,1).data)[0],data[1],data[2],data[3]);case 3:{let s=new OffscreenCanvas(a.width,a.height),c=s.getContext("2d");return a instanceof HTMLImageElement?(c.drawImage(a,0,0),data=c.getImageData(e,n,1,1)):data=a.getContext("2d").getImageData(e,n,1,1).data,color(data[0],data[1],data[2],data[3])}case 4:let u=new OffscreenCanvas(a,o),l=u.getContext("2d");return l.putImageData(ctx.getImageData(e,n,a,o),0,0),u;case 5:{let f=new OffscreenCanvas(r.width,r.height),g=f.getContext("2d");return g.drawImage(r,-e,-n),f}}}function mask(){ctx.globalCompositeOperation="source-atop"}function adoptCanvas(){canvas.tabIndex=-1,canvas.onmousedown=t=>{mousePressed(t),mouseIsPressed=!0,mouseButton=t.button},canvas.onmousemove=t=>{let e=canvas.getBoundingClientRect();pmouseX=mouseX,pmouseY=mouseY,mouseX=constrain(t.pageX-e.x,0,width),mouseY=constrain(t.pageY-e.y,0,height),mouseMoved(t)},canvas.onmouseup=t=>{mouseReleased(t),mouseClicked(t),mouseButton=t.button,mouseIsPressed=!1,t.preventDefault()},canvas.oncontextmenu=t=>t.preventDefault(),canvas.onmouseover=t=>mouseOver(t),canvas.onmouseout=t=>mouseOut(t),canvas.onwheel=t=>{mouseScrolled(t),t.preventDefault()},canvas.onkeydown=t=>{t.preventDefault(),key=t.key,keyCode=t.keyCode,keyIsPressed=!0,keyPressed(t)},canvas.onkeyup=t=>{t.preventDefault(),key=t.key,keyCode=t.keyCode,keyReleased(t)},canvas.onkeypress=t=>{t.preventDefault(),key=t.key,keyCode=t.keyCode,keyTyped(t)}}function rejectCanvas(){canvas&&(canvas.onmousedown=null,canvas.onmousemove=null,canvas.onmouseup=null,canvas.oncontextmenu=null,canvas.onmouseover=null,canvas.onmouseout=null,canvas.onwheel=null,canvas.onkeydown=null,canvas.onkeyup=null,canvas.onkeypress=null)}function debug(...t){console.debug(...t)}function isEqual(...t){console.assert(...t)}function day(){return(new Date).getDate()}function month(){return(new Date).getMonth()}function year(){return(new Date).getYear()}function hour(){return(new Date).getHours()}function minute(){return(new Date).getMinutes()}function seconds(){return(new Date).getSeconds()}function enableContextMenu(){canvas.oncontextmenu=!0}function cursor(t){document.body.style.cursor=t}function smooth(){ctx.imageSmoothingEnabled=!0,ctx.imageSmoothingQuality="high"}function noSmooth(){ctx.imageSmoothingEnabled=!1,ctx.imageSmoothingQuality="low"}function noLoop(){skiJSData.draw=draw,draw=0}function loop(){draw=skiJSData.draw||draw}function max(t,e){return t>e?t:e}function min(t,e){return t<e?t:e}function mag(t,e){return Math.sqrt(t**2+e**2)}function dist(t,e,n,a){return mag(n-t,a-e)}function manhattanDistance(t,e,n,a){return abs(t-n)+abs(e-a)}function chebyshevDistance(t,e,n,a){return max(abs(t-n),abs(e-a))}function exp(t){return Math.E**t}function norm(t,e,n){return(t-e)/(n-e)}function map(t,e,n,a,o){return a+(o-a)*norm(t,e,n)}function lerp(t,e,n){return(e-t)*n+t}function random(t,e){return e?Math.random()*(e-t)+t:t?Math.random()*t:Math.random()}function constrain(t,e,n){return min(max(t,e),n)}function log(t){return Math.log(t)}function sqrt(t){return Math.sqrt(t)}function sq(t){return t**2}function pow(t,e){return t**e}function abs(t){return t<0?-t:t}function trunc(t){return 0|t}function floor(t){return t<0?(0|t)-1:0|t}function ceil(t){return floor(t)+1}function round(t){return t-floor(t)<.5?floor(t):ceil(t)}function sin(t){return skiJSData.angle===DEGREES&&(t=degrees(t)),Math.sin(t)}function cos(t){return skiJSData.angle===DEGREES&&(t=degrees(t)),Math.cos(t)}function tan(t){return skiJSData.angle===DEGREES&&(t=degrees(t)),Math.tan(t)}function acos(t){return skiJSData.angle===DEGREES&&(t=degrees(t)),Math.acos(t)}function asin(t){return skiJSData.angle===DEGREES&&(t=degrees(t)),Math.asin(t)}function atan(t){return t=Math.atan(t),skiJSData.angle===DEGREES&&(t=radians(t)),t}function atan2(t,e){let n=Math.atan2(t,e);return skiJSData.angle===DEGREES&&(n=radians(n)),n}function radians(t){return t*(180/PI)}function degrees(t){return t*(PI/180)}function angleMode(t){skiJSData.angle=t}function bezierPoint(t,e,n,a,o){return(1-o)*(1-o)*(1-o)*t+3*(1-o)*(1-o)*o*e+3*(1-o)*o*o*n+o*o*o*a}function bezierTangent(t,e,n,a,o){return 3*o*o*(-t+3*e-3*n+a)+6*o*(t-2*e+n)+3*(-t+e)}function colorMode(t){return skiJSData.color=t}function color(...t){if("string"==typeof t[0]&&t.length<=1&&/(#|rgb|hsl|rgba)/.test(t[0]))return t[0];if(t[0]instanceof Array&&(t=t[0]),"number"==typeof t[1]&&/rgb|rgba/.test(t[0])){let e=t[0].match(/[0-9\.]+(?=(,|\)))/g);t=[e[0],e[1],e[2],t[1]]}switch(skiJSData.color){case RGBA:let[n,a,o,r]=t.length>4?Object.assign(t,{length:4}):t;switch(t.length){case 1:return`rgba(${n}, ${n}, ${n}, 1)`;case 2:return`rgba(${n}, ${n}, ${n}, ${a/255})`;case 3:return`rgba(${n}, ${a}, ${o}, 1)`;case 4:return`rgba(${n}, ${a}, ${o}, ${r/255})`}break;case HSL:return`hsl(${t[0]}, ${t[1]}%, ${t[2]}%)`;case HEX:return t[0]}}function lerpColor(t,e,n){if("string"!=typeof t||"string"!=typeof e||skiJSData.color!==RGBA)return;let[a,o,r,s]=t.match(/\d{1,3}/g),[c,u,l,f]=e.match(/\d{1,3}/g);return`rgba(${lerp(+a,+c,n)}, ${lerp(+o,+u,n)}, ${lerp(+r,+l,n)}, ${lerp(+s,+f,n)})`}function red(...t){if(skiJSData.color!==RGBA)return;let e=color(...t);return+e.match(/\d+(\.|)\d*/)}function green(...t){if(skiJSData.color!==RGBA)return;let e=color(...t);return+e.match(/\d+(\.|)\d*/g)[1]}function blue(...t){if(skiJSData.color!==RGBA)return;let e=color(...t);return+e.match(/\d+(\.|)\d*/g)[2]}function alpha(...t){if(skiJSData.color!==RGBA)return;let e=color(...t);return trunc(255*e.match(/\d+(\.|)\d*/g)[3])}function getImage(t,e,n){return new Promise((a,o)=>{let r=loadImage(t,e,n);r.onload=()=>a(r),r.onerror=()=>o("invalid or unaccessible image source")})}function loadImage(t,e,n){let a;return(a=e?new Image(e,n):new Image).src=t,/khanacademy/.test(t)||(a.crossOrigin="anonymous"),a}function getFont(...t){return new Promise((e,n)=>{let a=loadFont(...t);a.onload=()=>e(a),a.onerror=()=>reject("invalid or unaccessible fonts. not rlly, it's just an error lol. idk what went wrong, but you're router or DNS is blockin' fonts.googleapis.com")})}function loadFont(...t){let e=document.createElement("link");return e.rel="stylesheet",e.href=`https://fonts.googleapis.com/css?family=${t.join("|").replace(/ /g,"+")}`,document.body.appendChild(e),e}function frameRate(t){skiJSData.rate=t}function millis(){return skiJSData.millis}function raf(t){requestAnimationFrame(raf),delta=t-then;let e=1e3/skiJSData.rate;if(delta<e)return;let n=delta%e;then=t-n,delta-=n,draw_standin(t),frameCount+=1,skiJSData.millis=performance.now()-skiJSData.start,fps=1e3/delta}BACKSPACE=8,TAB=9,ENTER=13,SHIFT=16,CONTROL=17,ALT=18,ESCAPE=27,SPACE=32,LEFT=37,RIGHT=39,UP=38,DOWN=40,CORNER=0,CENTER=1,CLOSE=!0,SQUARE=atob("YnV0dA=="),ROUND="round",PROJECT="square",MITER="iter",BEVEL="bevel",DEGREES="deg",RADIANS="rad",TAU=2*(PI=Math.PI),RGBA="rgba",HSL="hsl",HEX="hex",RIGHT_BUTTON=2,canvas=null,ctx=null,mouseReleased=()=>{},mouseScrolled=()=>{},mouseClicked=()=>{},mouseOut=()=>{},mouseOver=()=>{},mouseMoved=()=>{},keyPressed=()=>{},keyReleased=()=>{},keyTyped=()=>{},mouseIsPressed=!1,mouseButton=LEFT_BUTTON=0,mouseY=0,pmouseX=mouseX=0,pmouseY=mouseY,skiJSData={rect:CORNER,ellipse:CENTER,arc:CENTER,image:CORNER,leading:0,height:12,flags:[],fontString(t,e){let n="";return this.flags.includes("bold")&&(n+="bold "),this.flags.includes("italics")&&(n+="italics "),n+`${e}px `+t},pos(t,e,n,a,o){return"rect"===t||"image"===t?this[t]<1?[e,n]:[e-a/2,n-o/2]:this[t]<1?[e+a/2,n+a/2]:[e,n]},matrixToArray:t=>["a","b","c","d","e","f"].map(e=>t[e]),matrices:[],path:[],rate:60,millis:0,start:0,draw:0,angle:DEGREES,color:RGBA},fps=60,frameCount=0,delta=1e3/60,then=performance.now(),skiJSData.start=performance.now(),Object.defineProperty(window,"draw",{get:()=>draw_standin,set(t){"function"!=typeof draw_standin&&requestAnimationFrame(raf),draw_standin=t},configurable:!0});for(let i=requestAnimationFrame(()=>0);i--;)cancelAnimationFrame(i);
