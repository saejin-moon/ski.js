var SPACE,LEFT,RIGHT,UP,DOWN,PI,TAU,LEFT_BUTTON,RIGHT_BUTTON,ESCAPE,TAB,SHIFT,CONTROL,ALT,ENTER,BACKSPACE,RGBA,HSL,HEX,skiJSData;function debug(...n){console.debug(...n)}function isEqual(...n){console.assert(...n)}function day(){return(new Date).getDate()}function month(){return(new Date).getMonth()}function year(){return(new Date).getYear()}function hour(){return(new Date).getHours()}function minute(){return(new Date).getMinutes()}function seconds(){return(new Date).getSeconds()}function enableContextMenu(){canvas.oncontextmenu=!0}function cursor(n){document.body.style.cursor=n}function smooth(){ctx.imageSmoothingEnabled=!0,ctx.imageSmoothingQuality="high"}function noSmooth(){ctx.imageSmoothingEnabled=!1,ctx.imageSmoothingQuality="low"}function noLoop(){skiJSData.draw=draw,draw=0}function loop(){draw=skiJSData.draw||draw}function max(n,t){return n>t?n:t}function min(n,t){return n<t?n:t}function mag(n,t){return Math.sqrt(n**2+t**2)}function dist(n,t,e,r){return mag(e-n,r-t)}function manhattanDistance(n,t,e,r){return abs(n-e)+abs(t-r)}function chebyshevDistance(n,t,e,r){return max(abs(n-e),abs(t-r))}function exp(n){return Math.E**n}function norm(n,t,e){return(n-t)/(e-t)}function map(n,t,e,r,a){return r+(a-r)*norm(n,t,e)}function lerp(n,t,e){return(t-n)*e+n}function random(n,t){return t?Math.random()*(t-n)+n:n?Math.random()*n:Math.random()}function constrain(n,t,e){return min(max(n,t),e)}function log(n){return Math.log(n)}function sqrt(n){return Math.sqrt(n)}function sq(n){return n**2}function pow(n,t){return n**t}function abs(n){return n<0?-n:n}function trunc(n){return 0|n}function floor(n){return n<0?(0|n)-1:0|n}function ceil(n){return floor(n)+1}function round(n){return n-floor(n)<.5?floor(n):ceil(n)}function sin(n){return skiJSData.angle===DEGREES&&(n=degrees(n)),Math.sin(n)}function cos(n){return skiJSData.angle===DEGREES&&(n=degrees(n)),Math.cos(n)}function tan(n){return skiJSData.angle===DEGREES&&(n=degrees(n)),Math.tan(n)}function acos(n){return skiJSData.angle===DEGREES&&(n=degrees(n)),Math.acos(n)}function asin(n){return skiJSData.angle===DEGREES&&(n=degrees(n)),Math.asin(n)}function atan(n){return n=Math.atan(n),skiJSData.angle===DEGREES&&(n=radians(n)),n}function atan2(n,t){let e=Math.atan2(n,t);return skiJSData.angle===DEGREES&&(e=radians(e)),e}function radians(n){return n*(180/PI)}function degrees(n){return n*(PI/180)}function angleMode(n){skiJSData.angle=n}function bezierPoint(n,t,e,r,a){return(1-a)*(1-a)*(1-a)*n+3*(1-a)*(1-a)*a*t+3*(1-a)*a*a*e+a*a*a*r}function bezierTangent(n,t,e,r,a){return 3*a*a*(3*t-n-3*e+r)+6*a*(n-2*t+e)+3*(-n+t)}function colorMode(n){return skiJSData.color=n}function color(...n){if("string"==typeof n[0]&&n.length<=1&&/(#|rgb|hsl|rgba)/.test(n[0]))return n[0];if(n[0]instanceof Array&&(n=n[0]),"number"==typeof n[1]&&/rgb|rgba/.test(n[0])){let t=n[0].match(/[0-9\.]+(?=(,|\)))/g);n=[t[0],t[1],t[2],n[1]]}switch(skiJSData.color){case RGBA:const[t,e,r,a]=n.length>4?Object.assign(n,{length:4}):n;switch(n.length){case 1:return`rgba(${t}, ${t}, ${t}, 1)`;case 2:return`rgba(${t}, ${t}, ${t}, ${e/255})`;case 3:return`rgba(${t}, ${e}, ${r}, 1)`;case 4:return`rgba(${t}, ${e}, ${r}, ${a/255})`}break;case HSL:return`hsl(${n[0]}, ${n[1]}%, ${n[2]}%)`;case HEX:return n[0]}}function lerpColor(n,t,e){if("string"!=typeof n||"string"!=typeof t||skiJSData.color!==RGBA)return;const[r,a,o,i]=n.match(/\d{1,3}/g),[u,s,c,l]=t.match(/\d{1,3}/g);return`rgba(${lerp(+r,+u,e)}, ${lerp(+a,+s,e)}, ${lerp(+o,+c,e)}, ${lerp(+i,+l,e)})`}function getImage(n,t,e){return new Promise(((r,a)=>{let o=loadImage(n,t,e);o.onload=()=>r(o),o.onerror=()=>a("invalid or unaccessible image source")}))}function loadImage(n,t,e){let r;return r=t?new Image(t,e):new Image,r.src=n,/khanacademy/.test(n)||(r.crossOrigin="anonymous"),r}function getFont(...n){return new Promise(((t,e)=>{const r=loadFont(...n);r.onload=()=>t(r),r.onerror=()=>reject("invalid or unaccessible fonts. not rlly, it's just an error lol. idk what went wrong, but you're router or DNS is blockin' fonts.googleapis.com")}))}function loadFont(...n){const t=document.createElement("link");return t.rel="stylesheet",t.href=`https://fonts.googleapis.com/css?family=${n.join("|").replace(/ /g,"+")}`,document.body.appendChild(t),t}function frameRate(n){skiJSData.rate=n}function millis(){return skiJSData.millis}function raf(n){requestAnimationFrame(raf),delta=n-then;let t=1e3/skiJSData.rate;if(delta<t)return;let e=delta%t;then=n-e,delta-=e,draw_standin(n),frameCount+=1,skiJSData.millis=performance.now()-skiJSData.start,fps=1e3/delta}BACKSPACE=8,TAB=9,ENTER=13,SHIFT=16,CONTROL=17,ALT=18,ESCAPE=27,SPACE=32,LEFT=37,RIGHT=39,UP=38,DOWN=40,DEGREES="deg",RADIANS="rad",TAU=2*(PI=Math.PI),RGBA="rgba",HSL="hsl",HEX="hex",skiJSData={angle:DEGREES,color:RGBA,rate:60,millis:0,start:0,draw:0},fps=60,frameCount=0,delta=1e3/60,then=performance.now(),skiJSData.start=performance.now(),Object.defineProperty(window,"draw",{get:()=>draw_standin,set(n){"function"!=typeof draw_standin&&requestAnimationFrame(raf),draw_standin=n},configurable:!0});for(let n=requestAnimationFrame((()=>0));n--;)cancelAnimationFrame(n);